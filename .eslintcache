[{"E:\\work\\web_dev\\react_projects\\code-editor\\src\\index.js":"1","E:\\work\\web_dev\\react_projects\\code-editor\\src\\App.js":"2","E:\\work\\web_dev\\react_projects\\code-editor\\src\\reportWebVitals.js":"3","E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\StateProvider.js":"4","E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\reducer.js":"5","E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\Login.js":"6","E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\CodeEditor.js":"7","E:\\work\\web_dev\\react_projects\\code-editor\\src\\firebase.js":"8","E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\FileRow.js":"9","E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\Footer.js":"10"},{"size":725,"mtime":1611544098645,"results":"11","hashOfConfig":"12"},{"size":962,"mtime":1611632844636,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":499162500000,"results":"14","hashOfConfig":"12"},{"size":382,"mtime":1611421387274,"results":"15","hashOfConfig":"12"},{"size":698,"mtime":1611721903067,"results":"16","hashOfConfig":"12"},{"size":1287,"mtime":1611632844632,"results":"17","hashOfConfig":"12"},{"size":6971,"mtime":1611721898021,"results":"18","hashOfConfig":"12"},{"size":712,"mtime":1611481661201,"results":"19","hashOfConfig":"12"},{"size":1994,"mtime":1611721784677,"results":"20","hashOfConfig":"12"},{"size":816,"mtime":1611594785899,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"wwa6s9",{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"24"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"24"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"24"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"24"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47"},"E:\\work\\web_dev\\react_projects\\code-editor\\src\\index.js",[],["48","49"],"E:\\work\\web_dev\\react_projects\\code-editor\\src\\App.js",["50"],"import './App.css';\n\nimport Login from './components/Login';\nimport CodeEditor from './components/CodeEditor';\n\nimport {useStateValue} from './components/StateProvider';\nimport { useEffect } from 'react';\n\nimport { auth } from './firebase';\n\nfunction App() {\n\n  const [{user}, dispatch] = useStateValue();\n\n  useEffect(() => {\n    auth.onAuthStateChanged(authUser => {\n      if (authUser) {\n        dispatch(\n          {\n            type: 'SET_USER',\n            payload: {\n              uid: authUser.uid,\n              photo: authUser.photoURL,\n              email: authUser.email,\n              displayName: authUser.displayName,\n            }\n          }\n        )\n      } else {\n        dispatch(\n          {\n            type: 'SET_USER',\n            payload: null\n          }\n        )\n      }\n    })\n  }, [])\n\n  // console.log(user);\n  \n  return (\n    <div className=\"app\">\n      {!user? <Login /> : <CodeEditor />}\n    </div>\n  );\n}\n\nexport default App;\n","E:\\work\\web_dev\\react_projects\\code-editor\\src\\reportWebVitals.js",[],"E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\StateProvider.js",[],"E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\reducer.js",[],"E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\Login.js",["51"],"import { Button } from '@material-ui/core';\r\nimport React from 'react';\r\nimport './Login.css';\r\n\r\nimport {auth, provider} from '../firebase';\r\n\r\nfunction Login() {\r\n\r\n    const signIn = (e) => {\r\n        e.preventDefault();\r\n        \r\n        auth\r\n        .signInWithPopup(provider)\r\n        .catch(err => alert(err.message))\r\n    };\r\n\r\n    return (\r\n        <div className=\"login\">\r\n            <div className=\"login__container\">\r\n                <img\r\n                    src=\"https://user-images.githubusercontent.com/674621/71187801-14e60a80-2280-11ea-94c9-e56576f76baf.png\"\r\n                    alt=\"\"\r\n                />\r\n                <Button\r\n                    startIcon={ \r\n                        <img\r\n                            style={{\r\n                                height: \"30px\",\r\n                                paddingRight: \"20px\"\r\n                            }} \r\n                            src=\"https://hrcdn.net/community-frontend/assets/google-colored-20b8216731.svg\"  \r\n                        />\r\n                    }\r\n                    onClick={signIn}\r\n                    variant='outlined'\r\n                >\r\n                    Sign in\r\n                </Button>\r\n            </div>\r\n        \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\CodeEditor.js",["52"],"import React, { useEffect, useState } from 'react';\r\nimport './CodeEditor.css';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport Editor from \"@monaco-editor/react\";\r\n\r\nimport {db, firebaseApp} from '../firebase';\r\nimport firebase from 'firebase';\r\n\r\nimport {useStateValue} from './StateProvider';\r\n\r\nimport FileRow from './FileRow';\r\nimport Footer from './Footer';\r\n\r\nimport axios from 'axios';\r\n\r\nfunction CodeEditor() {\r\n\r\n    const [{user, defaultText, selectedId}, dispatch] = useStateValue();\r\n\r\n    const [file, setFile] = useState(null);\r\n    const [checked, setChecked] = useState(false);\r\n    const [progress, setProgress] = useState(false);\r\n    const [myFiles, setMyFiles] = useState([]);\r\n\r\n    useEffect(() => {\r\n        setProgress(true);\r\n\r\n        db\r\n        .collection(\"users\")\r\n        .doc(user.email)\r\n        .collection(\"files\")\r\n        .orderBy(\"timestamp\", \"desc\")\r\n        .onSnapshot((snapshot) => \r\n            setMyFiles(\r\n                snapshot.docs.map((doc) => (\r\n                    {\r\n                        id: doc.id,\r\n                        data: doc.data(),\r\n                    }\r\n                ))\r\n            )\r\n        );\r\n\r\n        setProgress(false);\r\n    }, [file]);\r\n\r\n    // console.log(myFiles)\r\n\r\n    const handleEditorChange = (value, event)  => {\r\n        // console.log(\"Your CODE-->\", value);\r\n\r\n        dispatch(\r\n            {\r\n                type: \"EDITOR_TEXT\",\r\n                payload: value\r\n            }\r\n        );\r\n\r\n        db\r\n        .collection(\"users\")\r\n        .doc(user.email)\r\n        .collection(\"files\")\r\n        .doc(selectedId)\r\n        .set(\r\n            {\r\n                fileUrl: value,\r\n            },\r\n            {merge: true}\r\n        );\r\n\r\n    };\r\n\r\n    const onChange = (e) => {\r\n        setFile(e.target.files[0]);\r\n    };\r\n\r\n    const addFile = () => {\r\n        if (file) {\r\n            setProgress(true);\r\n            const storageRef = firebaseApp.storage().ref()\r\n            const fileRef = storageRef.child(file.name)\r\n\r\n            fileRef\r\n            .put(file)\r\n            .then(snapshot => {\r\n                return snapshot.ref.getDownloadURL();  \r\n            })\r\n            .then(downloadURL => {\r\n                // console.log(downloadURL)\r\n\r\n                axios\r\n                .get(`https://cors-anywhere.herokuapp.com/${downloadURL}`)\r\n                .then((res) => res.data)\r\n                .then((data) => {\r\n                    db\r\n                    .collection(\"users\")\r\n                    .doc(user.email)\r\n                    .collection(\"files\")\r\n                    .add(\r\n                        {\r\n                            fileName: file.name,\r\n                            fileUrl: data,\r\n                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n                        }\r\n                    )\r\n                });\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n            setProgress(false);\r\n        } else {\r\n            alert(\"Choose a file for upload!\")\r\n        }\r\n    };\r\n\r\n    \r\n    const logOut = () => {\r\n        dispatch(\r\n            {\r\n                type: 'SET_USER',\r\n                payload: null\r\n            }\r\n        )\r\n    };\r\n\r\n    console.log(defaultText);\r\n\r\n    return (\r\n        <div className=\"codeEditor\">\r\n            <div className=\"codeEditor__header\">\r\n                <div className=\"codeEditor__headerLeft\">\r\n                <Tooltip title=\"Sign out\">\r\n                    <Avatar\r\n                        className=\"codeEditor__avatar\"\r\n                        src={user.photo}\r\n                        alt=\"\"\r\n                        onClick={logOut} \r\n                    />\r\n                </Tooltip>\r\n\r\n                    <h3>{user.displayName}</h3>\r\n                </div>\r\n\r\n                <div className=\"codeEditor__headerMiddle\">\r\n                    <input \r\n                        type=\"file\"\r\n                        onChange={onChange}\r\n                    />\r\n\r\n                    <Button onClick={addFile}>\r\n                        Open in workspace\r\n                    </Button>\r\n                </div>\r\n\r\n                <div className=\"codeEditor__headerRight\">\r\n                    <img \r\n                        className=\"toggle__icon\" \r\n                        style={{backgroundColor: 'skyblue'}}\r\n                        src=\"https://image.flaticon.com/icons/svg/1164/1164954.svg\"\r\n                        alt=\"\" \r\n                    />\r\n                    <Switch\r\n                        checked={checked}\r\n                        onChange={() => setChecked((prev) => !prev)}\r\n                        color=\"primary\"\r\n                    />\r\n                    <img\r\n                        className=\"toggle__icon\" \r\n                        src=\"https://image.flaticon.com/icons/svg/2033/2033921.svg\" \r\n                        alt=\"\" \r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"codeEditor__body\">\r\n                <div className={`codeEditor__bodyLeft ${checked && 'codeEditor__bodyLeft--dark'}`}>\r\n                    <h3>Your Files</h3>\r\n\r\n                    <div className='codeEditor__files'>\r\n                        {progress? \r\n                            <CircularProgress /> \r\n                            :\r\n                            myFiles.map(({id, data: {fileName, fileUrl}}) => \r\n                                <FileRow\r\n                                    key={id}\r\n                                    id={id} \r\n                                    fileName={fileName}\r\n                                    fileUrl={fileUrl}\r\n                                    setProgress={setProgress}\r\n                                />\r\n                            ) \r\n                        }\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"codeEditor__bodyRight\">\r\n                    {progress? \r\n                        <CircularProgress /> \r\n                        : \r\n                        <Editor\r\n                        height=\"80vh\"\r\n                        theme={checked? \"vs-dark\" : \"\"}\r\n                        // path=\"script.js\"\r\n                        defaultLanguage=\"javascript\"\r\n                        // defaultValue={defaultText}\r\n                        value={defaultText}\r\n                        onChange={handleEditorChange}\r\n                        />\r\n                    }\r\n                    \r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"codeEditor__footer\">\r\n                    <Footer />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CodeEditor\r\n","E:\\work\\web_dev\\react_projects\\code-editor\\src\\firebase.js",[],"E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\FileRow.js",["53"],"import React, {forwardRef } from 'react';\r\nimport './FileRow.css';\r\n\r\nimport DescriptionIcon from '@material-ui/icons/Description';\r\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\r\n\r\nimport {db, firebaseApp} from '../firebase';\r\n\r\nimport {useStateValue} from './StateProvider';\r\n\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport axios from 'axios';\r\n\r\nconst FileRow = forwardRef(({id, fileName, fileUrl, setProgress}, ref) => {\r\n\r\n    const [{user, selectedId}, dispatch] = useStateValue();\r\n\r\n    const selectFile = () => {\r\n        // console.log(fileUrl);\r\n        setProgress(true)\r\n\r\n        dispatch(\r\n            {\r\n                type: \"EDITOR_TEXT\",\r\n                payload: fileUrl\r\n            }\r\n        )\r\n\r\n        dispatch(\r\n            {\r\n               type: \"SELECTED_FILE\",\r\n               payload: id\r\n            }\r\n        )\r\n        setProgress(false)\r\n    };\r\n\r\n    const handleDelete = () => {\r\n        // Delete from database\r\n        db\r\n        .collection(\"users\")\r\n        .doc(user.email)\r\n        .collection(\"files\")\r\n        .doc(id)\r\n        .delete()\r\n\r\n        // Delete from storage\r\n        firebaseApp\r\n        .storage()\r\n        .ref()\r\n        .child(fileName)\r\n        .delete()\r\n\r\n        if (id === selectedId) {\r\n            dispatch(\r\n                {\r\n                   type: \"EDITOR_TEXT\",\r\n                   payload: null\r\n                }\r\n            )\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={ref}  \r\n            className={`fileRow ${selectedId === id ? \"fileRow--selected\" : \"\"}`} \r\n            onClick={selectFile}\r\n        >\r\n            <div className=\"fileRow__file\">\r\n                <DescriptionIcon fontSize=\"small\" />\r\n                <p>{fileName}</p>\r\n            </div>\r\n            \r\n            <Tooltip title=\"Delete\" arrow>\r\n                <HighlightOffIcon onClick={handleDelete} />\r\n            </Tooltip>\r\n        </div>\r\n    )\r\n});\r\n\r\nexport default FileRow;","E:\\work\\web_dev\\react_projects\\code-editor\\src\\components\\Footer.js",["54"],"import React from 'react';\r\nimport './Footer.css';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\n\r\nimport { saveAs } from 'file-saver';\r\n\r\nimport {useStateValue} from './StateProvider';\r\n\r\nfunction Footer() {\r\n\r\n    const [{defaultText}, dispatch] = useStateValue();\r\n\r\n    const startDownload = () => {\r\n        const name = prompt('Enter File Name');\r\n        if (name) {\r\n            var file = new File([defaultText], `${name}.js`, {type: \"javascript;charset=utf-16\"});\r\n            saveAs(file)\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Button \r\n            className=\"footer__button\"\r\n            startIcon={<GetAppIcon />}\r\n            onClick={startDownload}\r\n        >\r\n            Download\r\n        </Button>\r\n    )\r\n}\r\n\r\nexport default Footer\r\n",{"ruleId":"55","replacedBy":"56"},{"ruleId":"57","replacedBy":"58"},{"ruleId":"59","severity":1,"message":"60","line":38,"column":6,"nodeType":"61","endLine":38,"endColumn":8,"suggestions":"62"},{"ruleId":"63","severity":1,"message":"64","line":26,"column":25,"nodeType":"65","endLine":32,"endColumn":27},{"ruleId":"59","severity":1,"message":"66","line":51,"column":8,"nodeType":"61","endLine":51,"endColumn":14,"suggestions":"67"},{"ruleId":"68","severity":1,"message":"69","line":13,"column":8,"nodeType":"70","messageId":"71","endLine":13,"endColumn":13},{"ruleId":"68","severity":1,"message":"72","line":13,"column":27,"nodeType":"70","messageId":"71","endLine":13,"endColumn":35},"no-native-reassign",["73"],"no-negated-in-lhs",["74"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["75"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","React Hook useEffect has a missing dependency: 'user.email'. Either include it or remove the dependency array.",["76"],"no-unused-vars","'axios' is defined but never used.","Identifier","unusedVar","'dispatch' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"77","fix":"78"},{"desc":"79","fix":"80"},"Update the dependencies array to be: [dispatch]",{"range":"81","text":"82"},"Update the dependencies array to be: [file, user.email]",{"range":"83","text":"84"},[812,814],"[dispatch]",[1436,1442],"[file, user.email]"]